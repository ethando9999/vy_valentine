<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberpunk Valentine</title>
    <!-- Import phông chữ phong cách Tech/Pixel từ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        /* CSS Reset & Thiết lập cơ bản */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            overflow: hidden; /* Ẩn thanh cuộn */
            height: 100vh;
            font-family: 'Share Tech Mono', monospace;
            position: relative;
        }

        /* Canvas cho hiệu ứng Matrix Rain */
        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* Container cho nội dung chính */
        #content-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10; /* Nằm trên canvas */
            text-align: center;
            width: 90%;
            max-width: 800px;
            pointer-events: none; /* Để chuột có thể xuyên qua nếu cần */
        }

        /* Dòng chữ chính */
        .typing-text {
            font-size: 2.5rem;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 
                0 0 5px #fff,
                0 0 10px #fff,
                0 0 20px #ff00de,
                0 0 30px #ff00de,
                0 0 40px #ff00de;
            
            /* Hiệu ứng con trỏ nhấp nháy */
            border-right: 4px solid #fff;
            padding-right: 5px;
            animation: blink-cursor 0.75s step-end infinite;
            
            /* Background mờ nhẹ phía sau chữ để dễ đọc hơn trên nền mưa */
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(255, 0, 222, 0.3);
            display: inline-block;
        }

        /* Animation cho con trỏ */
        @keyframes blink-cursor {
            from, to { border-color: transparent; }
            50% { border-color: #fff; }
        }

        /* Responsive cho màn hình nhỏ */
        @media (max-width: 600px) {
            .typing-text {
                font-size: 1.5rem;
                padding: 10px;
            }
        }
    </style>
</head>
<body>

    <!-- Canvas cho hiệu ứng nền -->
    <canvas id="matrixCanvas"></canvas>

    <!-- Nội dung chính -->
    <div id="content-container">
        <span class="typing-text"></span>
    </div>

    <script>
        // --- CẤU HÌNH MATRIX RAIN ---
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');

        // Thiết lập kích thước canvas full màn hình
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Các ký tự sẽ rơi: Chữ cái, số, trái tim, Valentine
        const chars = 'VALENTINE❤❤❤XYZ010101LOVECYBERPUNK❤❤❤FOREVER';
        const charArray = chars.split('');

        const fontSize = 16;
        let columns = canvas.width / fontSize; // Số lượng cột

        // Mảng lưu vị trí Y của các giọt mưa
        let drops = [];
        // Khởi tạo vị trí ban đầu (tất cả đều ở y=1)
        function initDrops() {
            columns = canvas.width / fontSize;
            drops = [];
            for (let i = 0; i < columns; i++) {
                drops[i] = Math.random() * -100; // Random vị trí bắt đầu để tự nhiên hơn
            }
        }
        initDrops();
        window.addEventListener('resize', initDrops);

        function drawMatrix() {
            // Tạo hiệu ứng mờ dần (trail effect)
            // Màu đen với độ trong suốt 0.05 tạo ra đuôi dài
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Cấu hình font chữ
            ctx.font = fontSize + 'px "Share Tech Mono", monospace';

            for (let i = 0; i < drops.length; i++) {
                // Chọn ký tự ngẫu nhiên
                const text = charArray[Math.floor(Math.random() * charArray.length)];

                // Màu sắc: Random giữa Trắng và Hồng Neon
                const isWhite = Math.random() > 0.85; // 15% cơ hội là màu trắng sáng
                if (isWhite) {
                    ctx.fillStyle = '#ffffff';
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = '#ffffff';
                } else {
                    ctx.fillStyle = '#ff007f'; // Màu hồng neon đậm
                    ctx.shadowBlur = 5;
                    ctx.shadowColor = '#ff007f';
                }

                // Vẽ ký tự
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                // Reset shadow để không ảnh hưởng hiệu năng quá nhiều
                ctx.shadowBlur = 0;

                // Gửi giọt mưa về lại đầu màn hình khi nó đi hết màn hình
                // Thêm yếu tố ngẫu nhiên để các cột không đồng đều
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }

                // Tăng tọa độ Y
                drops[i]++;
            }
        }

        // Chạy animation Matrix (30FPS cho phong cách retro)
        setInterval(drawMatrix, 33);


        // --- CẤU HÌNH TYPING EFFECT (GÕ CHỮ) ---
        const textElement = document.querySelector('.typing-text');
        
        // Danh sách các câu chúc
        const phrases = [
            'Chúc anh valentine vui vẻ',
            'Em yêu anh nhất trên đời',
            'Hãy luôn bên cạnh em nhé',
            'Là người tuyệt vời nhất',
            'Chúc anh luôn hạnh phúc'
        ];

        let phraseIndex = 0; // Câu hiện tại
        let charIndex = 0;   // Ký tự hiện tại trong câu
        let isDeleting = false; // Trạng thái đang xóa hay đang gõ
        let typeSpeed = 100; // Tốc độ gõ

        function typeEffect() {
            const currentPhrase = phrases[phraseIndex];
            
            if (isDeleting) {
                // Đang xóa: Giảm ký tự
                textElement.textContent = currentPhrase.substring(0, charIndex - 1);
                charIndex--;
                typeSpeed = 20; // Xóa nhanh hơn gõ
            } else {
                // Đang gõ: Thêm ký tự
                textElement.textContent = currentPhrase.substring(0, charIndex + 1);
                charIndex++;
                typeSpeed = 30; // Tốc độ gõ bình thường
            }

            // Logic chuyển đổi trạng thái
            if (!isDeleting && charIndex === currentPhrase.length) {
                // Đã gõ xong câu -> Dừng lại một chút rồi xóa
                isDeleting = true;
                typeSpeed = 2000; // Dừng 2 giây để đọc
            } else if (isDeleting && charIndex === 0) {
                // Đã xóa xong câu -> Chuyển sang câu tiếp theo
                isDeleting = false;
                phraseIndex = (phraseIndex + 1) % phrases.length; // Loop lại từ đầu nếu hết danh sách
                typeSpeed = 500; // Dừng 0.5s trước khi gõ câu mới
            }

            setTimeout(typeEffect, typeSpeed);
        }

        // Bắt đầu hiệu ứng gõ chữ
        document.addEventListener('DOMContentLoaded', typeEffect);

    </script>
</body>
</html>